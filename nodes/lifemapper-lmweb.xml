<?xml version="1.0" standalone="no"?>

<kickstart>


	<description>
	Lifemapper-server roll.
	LMweb install 
	</description>

	<copyright>
	Copyright (c) 2000 - 2012 The Regents of the University of California.
	All rights reserved. Rocks(r) v5.5/v6.0 www.rocksclusters.org
	
	</copyright>

	<changelog>
	$Log$
	</changelog>

	<package>lifemapper-mod_python</package>
	<package>lifemapper-ant</package>
	<package>opt-cherrypy</package>
	<package>opt-cheeta</package>
	<package>opt-pylucene</package>

<post>

mkdir -p /var/lib/lm2/sessions
mkdir -p /var/lib/lm2/luceneIndex
mkdir -p /var/lib/lm2/.python-eggs

chgrp -R lmwriter /var/lib/lm2
chmod -R g+ws     /var/lib/lm2

mkdir -p /var/www/tmp
chown www-data:www-data /var/www/tmp

<file name="/etc/sysconfig/httpd" mode="append">

# For Lifemapper lmweb server
umask 002

</file>

service httpd restart

crontab -u lmwriter /opt/lifemapper/rocks/etc/lucene.cron

</post>

</kickstart>
