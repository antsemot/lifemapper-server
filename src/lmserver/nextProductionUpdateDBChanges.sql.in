-- Changes to post- 28 Feb 2014 version of code
-- \i /share/apps/lm2/lm2hydra/config/nextProductionUpdateDBChanges.sql
-- .............................................................................

\c mal
                                                             
-- ----------------------------------------------------------------------------

-- ----------------------------------------------------------------------------

        
-- Do this next time, then re-create all the views, and stored functions
-- ALTER TABLE lm3.OccurrenceSet RENAME COLUMN guid TO metadataUrl;
-- ALTER TABLE lm3.OccurrenceSet ALTER COLUMN metadataUrl SET DATA TYPE varchar(256);
-- ----------------------------------------------------------------------------
GRANT SELECT ON TABLE 
lm3.lm_envlayer, lm3.lm_fullmodel, lm3.lm_fullProjection, 
lm3.lm_mdlJob, lm3.lm_prjJob, lm3.lm_msgJob, lm3.lm_occJob, lm3.lm_bloat
TO GROUP reader;

GRANT SELECT ON TABLE 
lm3.lm_envlayer, lm3.lm_fullmodel, lm3.lm_fullProjection, 
lm3.lm_mdlJob, lm3.lm_prjJob, lm3.lm_msgJob, lm3.lm_occJob, lm3.lm_bloat
TO GROUP writer;

\i @LMHOME@/LmDbServer/config/createMALExtras.sql
     
-- ----------------------------------------------------------------------------
-- ----------------------------------------------------------------------------

-- ----------------------------------------------------------------------------
-- ----------------------------------------------------------------------------
\c speco


GRANT SELECT ON TABLE 
lm3.experimentpalayer_experimentpalayerid_seq,
lm3.experimentanclayer_experimentanclayerid_seq
TO GROUP reader;


GRANT SELECT, UPDATE ON TABLE 
lm3.experimentpalayer_experimentpalayerid_seq,
lm3.experimentanclayer_experimentanclayerid_seq
TO GROUP writer;


-- ----------------------------------------------------------------------------
GRANT SELECT ON TABLE 
lm3.lm_pamsum, lm3.lm_fullradbucket, 
lm3.lm_palayer, lm3.lm_anclayer, lm3.lm_shapegrid,
lm3.lm_intJob, lm3.lm_mtxJob, lm3.lm_msgJob
TO GROUP reader;

GRANT SELECT ON TABLE 
lm3.lm_pamsum, lm3.lm_fullradbucket, 
lm3.lm_palayer, lm3.lm_anclayer, lm3.lm_shapegrid,
lm3.lm_intJob, lm3.lm_mtxJob, lm3.lm_msgJob
TO GROUP writer;


-- ----------------------------------------------------------------------------

-- ----------------------------------------------------------------------------
-- ----------------------------------------------------------------------------
\c speco
\i LmDbServer/config/createSPECOExtras.sql
\i LmDbServer/config/createSPECOLayerFns.sql
-- ----------------------------------------------------------------------------
-- ----------------------------------------------------------------------------

