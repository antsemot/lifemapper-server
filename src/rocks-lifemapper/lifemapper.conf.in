# prefork MPM
<IfModule prefork.c>
StartServers       3
MinSpareServers    1
MaxSpareServers    3
ServerLimit       15
MaxClients        10
MaxRequestsPerChild  50
</IfModule>

# For lifemapper-server roll
<VirtualHost *:80>

# load mod_python module
LoadModule python_module modules/mod_python.so

# Enable MapServer debugging
SetEnv MS_ERRORFILE "@MAPSERVER_TMP@/mapserver_error.txt"
SetEnv MS_DEBUGLEVEL 5

# Custom logs
LogLevel debug
CustomLog logs/lifemapper_access combined
ErrorLog  logs/lifemapper_error

# Enable environment for config file
SetEnv LIFEMAPPER_CONFIG_FILE "@LMHOME@/config/config.ini"

# Make sure Mapserver finds projection files
SetEnv PROJ_LIB "@LMHOME@/share/proj"
 
# Root for lifemapper content
RewriteEngine on

<LocationMatch "^/(css|clients|hint|images|jobs|login|logout|schemas|services|robots.txt)">
   PythonPath "sys.path+['@LMHOME@/LmWebServer/public_html/services']+['@LMHOME@/']"
   SetHandler python-program
   PythonHandler cherrypy._cpmodpy::handler
   PythonOption cherrypy.setup svc::serverless
   PythonDebug On
</LocationMatch>
</VirtualHost>
