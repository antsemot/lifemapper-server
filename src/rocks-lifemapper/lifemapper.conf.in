# prefork MPM
<IfModule prefork.c>
StartServers       3
MinSpareServers    1
MaxSpareServers    3
ServerLimit       15
MaxClients        10
MaxRequestsPerChild  50
</IfModule>

# Need to set up the PYTHONPATH.  Cannot do this in VirtualHost declaration
WSGIPythonPath @LMHOME@

# For lifemapper-server roll
<VirtualHost *:80>

# load mod_wsgi module
LoadModule wsgi_module modules/mod_wsgi.so 
LoadModule status_module modules/mod_status.so

# Enable MapServer debugging
SetEnv MS_ERRORFILE "@MAPSERVER_TMP@/mapserver_error.txt"
SetEnv MS_DEBUGLEVEL 5

# Custom logs
LogLevel debug
CustomLog @LMSCRATCHDISK@/log/apache/lifemapper_access combined
ErrorLog  @LMSCRATCHDISK@/log/apache/lifemapper_error

# Enable environment for config file
SetEnv LIFEMAPPER_SERVER_CONFIG_FILE "@LMHOME@/config/config.lmserver.ini"
SetEnv LIFEMAPPER_SITE_CONFIG_FILE "@LMHOME@/config/config.site.ini"


# Make sure Mapserver finds projection files
SetEnv PROJ_LIB "@LMHOME@/share/proj"
 
# Root for lifemapper content
RewriteEngine on

# Mod_wsgi script for Lifemapper content
WSGIScriptAliasMatch ^/(css|client|clients|dl|hint|images|jobs|login|logout|signup|schemas|services|robots.txt) @LMHOME@/LmWebServer/services/common/svc.py/$1

</VirtualHost>
