#!/bin/bash

# Create directories for lucene indexes and cherrypy sessions
gname=lmwriter
GID=`grep $gname: /etc/group`

if [ "$GID" != "" ] ; then
    mkdir -p @LMWEB@
    mkdir -p @LMWEB@/sessions
    mkdir -p @LMWEB@/luceneIndex
    mkdir -p @LMWEB@/.python-eggs
    chgrp -R lmwriter @LMWEB@
    chmod -R g+ws @LMWEB@
else 
    echo "ERROR: group $gname does not exist"
    exit 1
fi

# install lucene cron job
crontab -u lmwriter @PKGROOT@/rocks/etc/lucene.cron

# enable user access to mysql DB
initfile=@PKGROOT@/rocks/sql/mysql.sql
if [ -f $initfile ]; then
    mysql @MYSQLDB@ <  $initfile
fi

